
source = "../examples/gut.htm";
//source = "http://www.gutenberg.org/files/31704/31704-h/31704-h.htm";
//source = "http://leyokki.org";

var result = '';

function loadDiv(source)
{
	// example = Load webpage through php
	//$('.page').load('php/grabber.php?url='+source);

	// loading webpage from source URL
	$.get('php/grabber.php?url='+source,function(data){
		$('page').html(data);
		console.log($.parseHTML(data));
		result = data;
		// Question : pourquoi result devient inaccessible quand
		// on sort de la fonction?
	delHeaders(result);
	});
}

loadDiv(source);

var nodeValues = [];

function delHeaders(data){
	var $log = $("#log"),
	isHead = false,
	html = $.parseHTML(data),
	nodeNames = [],
	scrolling = "";

	$.each(html,function(i,el){
		scrolling += el.nodeName+"\n";
		if (isHead == true) {
			// do not select if node is text
			if (el.nodeName != "#text" && el.nodeName != "PRE"){
				// create tag_in and tag_out for style
				tag_in = "<"+el.nodeName+">",
				tag_out = "<"+el.nodeName+"/>",
				// print innerHTML with tags
				nodeNames[i] = tag_in+el.innerHTML+tag_out;
			}
		}
		if (el.nodeName == "PRE") {
			// delete what is before and after the PRE tag
			isHead = !isHead;
		}
	});
	// print the results
	$log.append("<h3> Nodes </h3>");
	// conserver les <ol> pour garder les styles
	$("<ol></ol>")
		.append(nodeNames.join(""))
		.appendTo($log);
	$log.append(scrolling);
}
